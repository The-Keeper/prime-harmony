---
import ThemeToggle from "../components/ThemeToggle.astro";
import Logo from "../assets/logo.svg";
import LangSelect from "./LangSelect.astro";

const currentLang = Astro.currentLocale || '';
const availableLangs = {
  ru: "Русский",
  en: "English",
};

const whatName: Record<string, string> = {
  ru: "Что это?",
  en: "What is this?",
};

export function toOrdinal(
  number: number,
  suffixes: Partial<Record<Intl.LDMLPluralRule, string>>,
  locale = "en"
): string {
  if (Number.isNaN(number) || !Number.isFinite(number)) {
    return number.toString();
  }

  const pluralRule = new Intl.PluralRules(locale, { type: "ordinal" }).select(
    number
  ) as Intl.LDMLPluralRule;

  return number.toString() + (suffixes[pluralRule] ?? suffixes.other ?? "th");
}
---

<nav class="container-fluid">
  <ul>
    <li>
      <Logo fill="currentColor" />
    </li>
  </ul>
  <ul>
    <li><a href="#what">{whatName[currentLang]}</a></li>
  </ul>
  <ul>
    {
      currentLang && (
        <li>
          <LangSelect
            currentLang={currentLang}
            availableLanguages={availableLangs}
          />
        </li>
      )
    }
    <li><ThemeToggle /></li>
  </ul>
</nav>
